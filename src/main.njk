<!DOCTYPE HTML>
<html lang="ru">
<head>
	<title>Тестовое задание</title>
	<meta charset="utf-8">
	<meta name='viewport' content="width=device-width, initial-scale=1">
	<link rel="stylesheet" type="text/css" href="all.css">
</head>
<body>
{# date_obj - объект с датой #}
{# date_obj.date - дата #}
{# date_obj.docs - массив из документов #}
{# doc - объект со свойствами docId, docType и массивом products #}
{# products имеет свойства name, image, price, quantity, removed #}

{% for date_obj in data %}
	
<div class='date'>
	<h3 class="date__btn">&#9013; </h3><h3>{{ date_obj.date }}</h3> <h3>Документов: {{ date_obj.docs | length }} ({{ date_obj.docs | dateTotal | replace(".", ",") }} &#8381;)</h3>
	<div class='date-info' style='display:none'>

	{% for doc in date_obj.docs %}

		<div class='doc'>
			<div class='doc__title'>
				<h3>{{ doc.docType }} №{{ doc.docId }}</h3><h3>{{ doc.products | docTotal | replace(".", ",")}} &#8381;</h3>
			</div>
			<div class='doc__goods'>
				<p class="doc__btn">&#9660;</p><p>Товаров: {{ doc.products | length }}</p> 
			</div>
			<div class='doc__info' style='display:none'>
				<ul class='products__list'>

		{% for product in doc.products %}
			
			<li class="products__item">
			<div class="products__item_wrap">
			{% if product.image == null %}
				<img class="products__item_wrap-img" src="./img/noImage.jpg" style="border: 1px solid black" alt="{{ product.name }}">
			{% else %}
				<img class="products__item_wrap-img" src="{{ product.image }}" alt="{{ product.name }}">
			{% endif %} 
				<div class="products__item__wrap_text">
				<p class="products__item__wrap-name">{{ product.name }}</p>
				<p>{{ product.quantity }}

			{% if product.quantity % 10 === 1 or product.quantity === 1 %}
				штука
			{% elif 
			product.quantity % 10 === 2 or
			product.quantity % 10 === 3 or
			product.quantity % 10 === 4 or
			product.quantity === 2 or
			product.quantity === 3 or
			product.quantity === 4
			%}
				штуки 
			{% else  %}
				штук 
			{% endif %}
				
			 х {{ product.price | replace(".", ",") }} &#8381;</p>
			</p>
			</div>
			</div>

			<p class="products__item-amount">{{ (product.quantity * product.price) | round(2) | replace(".", ",") }} &#8381;</p></li>
			
		{% endfor %}
				</ul>
		</div>
		</div>

	{% endfor %}

	</div>
	</div>

{% endfor %}

<script src='all.js'></script>
</body>
</html>
